{"version":3,"sources":["webpack:///./jsx/queues/QueueAllNotificationsModal.jsx","webpack:///./jsx/queues/QueueNotification.jsx","webpack:///./jsx/queues/QueuePage.jsx","webpack:///./jsx/queues/QueuePageContent.jsx","webpack:///./jsx/queues/QueueSettingsModal.jsx","webpack:///./jsx/queues/QueueUser.jsx","webpack:///./jsx/queues/TeacherPanelModal.jsx","webpack:///./jsx/util/ConfirmModal.jsx","webpack:///./jsx/util/GrowingSpinner.jsx","webpack:///./jsx/util/QueuePasswordModal.jsx","webpack:///./jsx/util/TimeUtil.js"],"names":["QueueAllNotificationsModal","React","Component","render","props","data","map","x","i","listStyle","onClearNotifications","onHide","QueueNotification","author","time","message","QueuePage","match","params","id","user","updateUser","QueuePageContent","constructor","state","requestingData","queueName","users","superUsers","showAllNotifications","allNotice","showSettingsModal","username","undefined","canClickPassButton","alreadyInQueue","isHaveAdditionalPermission","isTeacher","showTeacherPanel","failed","currentUser","nextUser","isFavorite","sortableOldIndex","onSettingsClick","bind","onExitClick","fetchQueue","onPassButtonClick","isAlreadyInQueue","onJoinButtonClick","onTakeLaboratoryClick","fetchCurrentAndNextUser","userPassed","toggleFavorite","onTeacherModelHide","onSortableChange","componentDidMount","setState","componentWillReceiveProps","newProps","fetch","then","resp","status","window","location","href","name","json","members","usersMap","Map","usersList","u","set","sequenceVal","push","get","length","notice","TimeUtil","getFormattedTime","catch","err","console","log","queue","alert","response","e","method","alreadyExistInQueue","isPrivate","showModal","reload","userType","isSuperUser","su","newIndex","color","textDecoration","cursor","animation","onStart","evt","oldIndex","onEnd","sort","handle","QueueSettingsModal","showDeleteConfirm","deleteConfirmSendingRequest","deleteConfirmMessage","showShuffleModal","shuffleModalSendingRequest","shuffleModalMessage","onDeleteAccept","onShuffleClick","document","QueueUser","swapSendingRequest","showSwapConfirm","showNotificationModal","notificationModalShowMessage","onSwapAccept","deleteUserFromQueue","queuename","onChange","imgUrl","width","fullname","isCanManage","TeacherPanelModal","commentInputFocused","isCommentaryPrivate","commentaryInput","textUnderInput","comments","addCommentary","commentaryInputHandler","fetchComments","currentUsers","reverse","event","target","value","teacher","onNextUser","height","checked","ConfirmModal","title","sendingrequest","accept","decline","GrowingSpinner","QueuePasswordModal","password","successful","sendingReq","onPasswordChange","shortName","onSuccess","fullName","dateISO","a","split","creationDate","Date","UTC","DATE","getDate","MONTH","toLocaleString","month","HOURS","getHours","MINUTES","getMinutes","SECONDS","getSeconds"],"mappings":"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","file":"6.bundle.js","sourcesContent":["import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal.js';\r\nimport Button from 'react-bootstrap/Button.js';\r\nimport Media from './QueueNotification.jsx';\r\n\r\nexport default class QueueAllNotificationsModal extends React.Component {\r\n\r\n\r\n    render() {\r\n        return (\r\n            <Modal {...this.props} size=\"lg\" aria-labelledby=\"queue-all-notice-modal-vcenter\" centered>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title id=\"queue-all-notice-modal-vcenter\">\r\n                        Все обновления\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    {this.props.data.map((x, i) => <li style={{listStyle: 'none'}} key={i}>{x}</li>)}\r\n                </Modal.Body>\r\n                <Modal.Footer className={\"justify-content-between\"}>\r\n                    <Button onClick={this.props.onClearNotifications} variant={\"danger\"}>Очистить оповещения</Button>\r\n                    <Button onClick={this.props.onHide} className={\"btn-primary\"}>Закрыть</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        )\r\n    }\r\n}\r\n\r\n","import React from 'react';\r\n\r\nexport default class QueueNotification extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"media pt-3\">\r\n                <p className=\"media-body pb-3 mb-0 small lh-125 border-bottom border-gray\">\r\n                    <div className=\"d-block text-gray-dark\">\r\n                        <div className=\"d-flex justify-content-between\">\r\n                            <div className={\"d-inline\"}><strong>{this.props.author}</strong></div>\r\n                            <div className={\"d-inline\"}>{this.props.time}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className={\"text-left\"}>\r\n                        {this.props.message}\r\n                    </div>\r\n\r\n                </p>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\n// const QueuePageContent = require('./QueuePageContent.jsx');\r\nimport QueuePageContent from './QueuePageContent.jsx';\r\n\r\nexport default class QueuePage extends React.Component {\r\n\r\n    render() {\r\n        return <QueuePageContent queueName={this.props.match.params.id} user={this.props.user} updateUser={this.props.updateUser}/>\r\n    }\r\n}\r\n\r\n","import React from 'react';\r\nimport QueueUser from './QueueUser.jsx';\r\nimport Media from './QueueNotification.jsx';\r\nimport AllMedia from './QueueAllNotificationsModal.jsx';\r\nimport Spinner from './../util/GrowingSpinner.jsx';\r\nimport QueueSettingsModal from './QueueSettingsModal.jsx';\r\nimport ModalWindow from './../util/QueuePasswordModal.jsx';\r\nimport TeacherPanelModal from './TeacherPanelModal.jsx';\r\nimport TimeUtil from './../util/TimeUtil.js';\r\n\r\nimport Sortable from 'react-sortablejs';\r\n\r\nexport default class QueuePageContent extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            requestingData: false,\r\n            queueName: this.props.queueName,\r\n            users: [],\r\n            superUsers: [],\r\n            showAllNotifications: false,\r\n            allNotice: [],\r\n            showSettingsModal: false,\r\n            username: undefined,\r\n            canClickPassButton: false,\r\n            alreadyInQueue: false,\r\n            isHaveAdditionalPermission: false,\r\n            isTeacher: false,\r\n            showTeacherPanel: false,\r\n            failed: false,\r\n\r\n            currentUser: null,\r\n            nextUser: null,\r\n\r\n            isFavorite: false,\r\n            sortableOldIndex: null\r\n        };\r\n\r\n        this.onSettingsClick = this.onSettingsClick.bind(this);\r\n        this.onExitClick = this.onExitClick.bind(this);\r\n        this.fetchQueue = this.fetchQueue.bind(this);\r\n        this.onPassButtonClick = this.onPassButtonClick.bind(this);\r\n        this.isHaveAdditionalPermission = this.isHaveAdditionalPermission.bind(this);\r\n        this.isTeacher = this.isTeacher.bind(this);\r\n        this.isAlreadyInQueue = this.isAlreadyInQueue.bind(this);\r\n        this.onJoinButtonClick = this.onJoinButtonClick.bind(this);\r\n        this.onTakeLaboratoryClick = this.onTakeLaboratoryClick.bind(this);\r\n\r\n        this.fetchCurrentAndNextUser = this.fetchCurrentAndNextUser.bind(this);\r\n        this.userPassed = this.userPassed.bind(this);\r\n\r\n        this.onClearNotifications = this.onClearNotifications.bind(this);\r\n        this.toggleFavorite = this.toggleFavorite.bind(this);\r\n        this.isFavorite = this.isFavorite.bind(this);\r\n\r\n        this.onTeacherModelHide = this.onTeacherModelHide.bind(this);\r\n\r\n        this.onSortableChange = this.onSortableChange.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.setState({requestingData: true});\r\n        this.fetchQueue(this.props);\r\n    }\r\n\r\n    componentWillReceiveProps(newProps) {\r\n        this.setState({requestingData: true, queueName: newProps.queueName});\r\n        this.fetchQueue(newProps);\r\n    }\r\n\r\n    fetchQueue(props) {\r\n        fetch('api/queue?queue_name=' + props.queueName)\r\n            .then(resp => {\r\n                if (resp.status === 401) {\r\n                    window.location.href = \"/api/auth\";\r\n                }\r\n                if (resp.status === 404) {\r\n                    this.setState({\r\n                        \"queueName\": \"Очередь с именем \" + props.name + \" не найдена\",\r\n                        requestingData: false\r\n                    });\r\n                    return;\r\n                }\r\n                return resp.json()\r\n            })\r\n            .then(resp => {\r\n                    let members = resp[\"members\"];\r\n                    let usersMap = new Map();\r\n                    let usersList = [];\r\n                    members.map(u => usersMap.set(u.id, u));\r\n                    for (let sequenceVal of resp[\"queue_sequence\"]) {\r\n                        usersList.push(usersMap.get(sequenceVal));\r\n                    }\r\n\r\n                    this.setState({\r\n                        users: usersList,\r\n                        queueName: resp[\"fullname\"],\r\n                        superUsers: resp['super_users'],\r\n                        alreadyInQueue: this.isAlreadyInQueue(),\r\n                        isTeacher: this.isTeacher(),\r\n                        isFavorite: this.isFavorite()\r\n                    });\r\n\r\n\r\n                    // we need to check isHaveAdditionalPermissions after setting state about queue\r\n                    this.setState({\r\n                        canClickPassButton: (usersList.length > 0 && (usersList[0]['username'] === this.props.user['user']['username'] || this.isHaveAdditionalPermission())),\r\n                        isHaveAdditionalPermission: this.isHaveAdditionalPermission()\r\n                    });\r\n\r\n                    let data = [];\r\n                    for (let notice of resp[\"notifications\"]) {\r\n\r\n                        data.push(<Media author={(notice[\"author\"] == null ? \"Система\" : notice[\"author\"])}\r\n                                         time={TimeUtil.getFormattedTime(notice[\"creation_date\"])}\r\n                                         message={notice[\"message\"]}/>)\r\n                    }\r\n                    this.setState({allNotice: data, requestingData: false, failed: false});\r\n                }\r\n            ).catch(err => {\r\n            console.log(err);\r\n            this.setState({\r\n                \"queueName\": \"Не удалось загрузить очередь\",\r\n                requestingData: false,\r\n                failed: true,\r\n                users: [],\r\n                superUsers: [],\r\n                allNotice: [],\r\n            })\r\n        });\r\n    }\r\n\r\n    isFavorite() {\r\n        for (let queue of this.props.user['favorites']) {\r\n            if (queue['queue_name'] === this.props.queueName) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    fetchCurrentAndNextUser() {\r\n        fetch(`/api/teacher/queue?queue_name=${this.props.queueName}`)\r\n            .then(resp => {\r\n                if (resp.status === 200 || resp.status === 400) {    // if queue don't have users\r\n                    return resp.json();\r\n                } else {\r\n                    alert(resp.status);\r\n                }\r\n            })\r\n            .then(response => {\r\n                if (response[\"current_users\"] !== null) {\r\n                    this.setState({currentUser: response[\"current_users\"]})\r\n                }\r\n\r\n                if (response['next_user'] !== null) {\r\n                    this.setState({nextUser: response[\"next_user\"]})\r\n                }\r\n            })\r\n            .catch(e => console.log(e));\r\n    }\r\n\r\n    userPassed() {\r\n        fetch(`/api/teacher/queue?queue_name=${this.props.queueName}&passed_user=${this.state.currentUser[0]['username']}`, {method: 'put'})\r\n            .then(resp => {\r\n                if (resp.status === 200) {\r\n                    this.fetchCurrentAndNextUser(); // fetch new user\r\n                } else {\r\n                    alert(resp.status);\r\n                }\r\n            })\r\n            .catch(e => console.log(e));\r\n    }\r\n\r\n    onJoinButtonClick() {\r\n        if (this.props.alreadyExistInQueue) return;\r\n        if (this.props.isPrivate) this.setState({showModal: true});\r\n        else\r\n            fetch(\"api/queue?queue_name=\" + this.props.queueName, {method: \"put\"})\r\n                .then(resp => {\r\n                    if (resp.status === 200) {\r\n                        window.location.reload();\r\n                    } else if (resp.status === 403) {\r\n                        this.setState({showModal: true})\r\n                    }\r\n\r\n                })\r\n\r\n    }\r\n\r\n    isAlreadyInQueue() {\r\n        if (this.props.user !== null) {\r\n            let x;\r\n            for (x of this.props.user['queues_member']) {\r\n                if (x['short_name'] === this.props.queueName) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    isHaveAdditionalPermission() {\r\n        if (this.props.user !== null) {\r\n            let userType = this.props.user[\"user\"][\"user_type\"];\r\n            return userType === \"TEACHER\" || userType === \"ADMIN\" || QueuePageContent.isSuperUser(this.state.superUsers, this.props.user);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    static isSuperUser(superUsers, user) {\r\n        let su;\r\n        for (su of superUsers) {\r\n            if (su['username'] === user['user']['username']) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    isTeacher() {\r\n        if (this.props.user !== null) {\r\n            let userType = this.props.user[\"user\"][\"user_type\"];\r\n            return userType === \"TEACHER\";\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    onSettingsClick() {\r\n        this.setState({showSettingsModal: true});\r\n    }\r\n\r\n    onExitClick() {\r\n        fetch(`api/queue?queue_name=${this.props.queueName}&target=USER`, {method: \"delete\"})\r\n            .then(resp => {\r\n                if (resp.status === 200) {\r\n                    window.location.reload();\r\n                } else if (resp.status === 400) {\r\n                    let x = resp.json();\r\n                    console.log(\"Error params: \" + x);\r\n                } else {\r\n                    alert(\"Минуточку! Ошибочка! Статус: \" + resp.status);\r\n                }\r\n            })\r\n            .catch(e => console.log(e));\r\n    }\r\n\r\n    onPassButtonClick() {\r\n        if (this.state.canClickPassButton) {\r\n            fetch(\"api/queue/\" + this.props.queueName)\r\n                .then(resp => {\r\n                    if (resp.status === 200) {\r\n                        window.location.reload();\r\n                        // this.fetchQueue(this.props);    // this work incorrect because it is don't update Sortable childs\r\n                    } else {\r\n                        // TODO: rewrite from alert to text on page :)\r\n                        alert(\"Здесь мне пока лень, но и не знаю куда его статвить. Ошибка \" + resp.status);\r\n                    }\r\n                })\r\n        }\r\n    }\r\n\r\n    onTakeLaboratoryClick() {\r\n        this.setState({showTeacherPanel: true});\r\n        this.fetchCurrentAndNextUser();\r\n    }\r\n\r\n    onClearNotifications() {\r\n        fetch(`/api/queue/${this.props.queueName}?action=clearnotifications`, {method: 'put'})\r\n            .then(resp => {\r\n                if (resp.status === 200) {\r\n                    this.fetchQueue(this.props);\r\n                } else {\r\n                    console.log(\"Error while clear notifications: \" + resp.status)\r\n                }\r\n            })\r\n    }\r\n\r\n    toggleFavorite() {\r\n        let method = this.state.isFavorite ? 'delete' : 'put';\r\n\r\n        fetch('/api/favorite?queue_name=' + this.props.queueName, {method: method})\r\n            .then(resp => {\r\n                if (resp.status === 200) {\r\n                    this.props.updateUser();\r\n                } else {\r\n                    console.log(resp.status);\r\n                }\r\n            })\r\n\r\n    }\r\n\r\n    onTeacherModelHide(){\r\n        this.setState({showTeacherPanel: false});\r\n        // this.fetchQueue(this.props); // don't update the Sortable child\r\n        window.location.reload();\r\n    }\r\n\r\n    onSortableChange(newIndex){\r\n        if (this.state.sortableOldIndex === null || this.state.sortableOldIndex === newIndex) return;\r\n\r\n        console.log(\"We need to move user at \" + this.state.sortableOldIndex + \" to \" + newIndex);\r\n\r\n        fetch(`/api/insert?queue_name=${this.props.queueName}&old_index=${this.state.sortableOldIndex }&new_index=${newIndex}`, {method: 'put'})\r\n            .then(resp => {\r\n                if (resp.status !== 200){\r\n                    alert(resp.status);\r\n                } else {\r\n                    this.fetchQueue(this.props);\r\n                }\r\n            })\r\n            .catch(e => console.log(e));\r\n\r\n        this.setState({sortableOldIndex: null});\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <main role=\"main\" className=\"container\">\r\n                <div className=\"d-flex align-items-center p-3 my-3 bg-purple rounded shadow-sm justify-content-between\"\r\n                     data-aos='slide-up'>\r\n                    <div className={\"d-flex\"}>\r\n                        <i className=\"fa fa-users fa-2x d-none d-md-inline\" aria-hidden=\"true\"></i>\r\n                        <div className=\"lh-100 d-flex flex-row\">\r\n                            <h6 className=\"ml-3 mb-0 text-black lh-100 my-auto\">{this.state.queueName}\r\n                                <button className={\"ml-1 btn \" + (this.state.isFavorite ?\"btn-warning\":\"btn-light\")} onClick={this.toggleFavorite}>\r\n                                        <p className={\"fa fa-star\"} style={{color: 'black'}}></p>\r\n                                </button>\r\n                            </h6>\r\n                            <button onClick={this.onJoinButtonClick}\r\n                                    className={\"btn btn-success ml-2 \" + ((this.state.alreadyInQueue || this.state.failed || this.state.isTeacher) ? \" d-none\" : \" d-flex\")}>\r\n                                <i className={\"fa fa-plus-square my-auto\"}></i>\r\n                                <div className={\"ml-1 d-none d-md-inline\"}>\r\n                                    <span>Войти в очередь</span>\r\n                                </div>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className={\"d-flex flex-column flex-md-row\"}>\r\n\r\n                        {this.state.isTeacher && <button className={\"btn btn-warning text-center mx-1 my-1\"}\r\n                                                         style={{textDecoration: 'none'}}\r\n                                                         onClick={this.onTakeLaboratoryClick}>\r\n                            <span className={\"d-none d-md-inline\"}>Принимать лабы </span>\r\n                            <i className=\"fa fa-chalkboard-teacher\"></i>\r\n                        </button>}\r\n\r\n                        <button\r\n                            className={\"btn btn-primary text-center mx-1 my-1 \" + ((!this.state.isHaveAdditionalPermission) && \" d-none\")}\r\n                            style={{textDecoration: 'none'}}\r\n                            onClick={this.onSettingsClick}>\r\n                            <span className={\"d-none d-md-inline\"}>Управление </span>\r\n                            <i className=\"fa fa-cog\"></i>\r\n                        </button>\r\n                        <button\r\n                            className={\"btn btn-danger mx-1 my-1 \" + ((!this.state.alreadyInQueue || this.state.isTeacher) && \" d-none\")}\r\n                            onClick={this.onExitClick}>\r\n                            <span className={\"d-none d-md-inline\"}>Выйти</span>\r\n                            <i className={\"fa fa-door-open ml-1\"}></i>\r\n                        </button>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div className=\"my-3 p-3 bg-white rounded shadow-sm\" data-aos-duration='800' data-aos='slide-up'>\r\n                    <h6 className=\"border-bottom border-gray pb-2 mb-0\">Последние обновления</h6>\r\n                    {this.state.requestingData ? <div className={\"text-center mt-3\"}><Spinner/></div> :\r\n                        this.state.allNotice.map((x, i) => {\r\n                            if (i < 3) {\r\n                                return <li key={i} style={{listStyle: 'none'}} data-aos=\"flip-up\">{x}</li>;\r\n                            } else return \"\";\r\n                        })}\r\n                    <small className=\"d-block text-right mt-3\">\r\n                        <a onClick={() => this.setState({showAllNotifications: true})} style={{cursor: 'pointer'}}>\r\n                            Все обновления\r\n                        </a>\r\n                    </small>\r\n                </div>\r\n\r\n                <div className=\"my-3 p-3 bg-white rounded shadow-sm\" data-aos='fade-up' data-aos-duration='900'>\r\n                    <div className={\"border-bottom justify-content-between d-flex flex-column flex-md-row mr-md-2\"}>\r\n                        <div>\r\n                            <div className={\"text-secondary\"}>\r\n                                Количество участников: {this.state.users.length}\r\n                            </div>\r\n                            <h6 className=\" border-gray pb-2 mb-0\">\r\n                                Участники очереди\r\n                            </h6>\r\n                        </div>\r\n\r\n                        <button onClick={this.onPassButtonClick}\r\n                                className={\"btn col-md-1 mr-md-2 d-inline mb-2 \" + (this.state.canClickPassButton ? \"btn-success\" : \"btn-secondary\")}>\r\n                            <i className={\"fa fa-check-circle\"}></i>Прошел\r\n                        </button>\r\n                    </div>\r\n\r\n\r\n                    {this.state.requestingData ?\r\n                        <div className={\"text-center mt-3\"}><Spinner/></div>\r\n                        :\r\n                        <ul className={\"pl-0\"}>\r\n                            <Sortable\r\n                                options={{\r\n                                    animation: 150,\r\n                                    onStart: (evt) => {this.setState({sortableOldIndex: evt.oldIndex})},\r\n                                    onEnd: (evt) => {this.onSortableChange(evt.newIndex)},\r\n                                    sort: this.state.isTeacher,\r\n                                    handle : \".sortable-user-handler\"\r\n                                }}\r\n\r\n                            >\r\n                            {this.state.users.map((x, i) => {\r\n                                return <li style={{listStyle: 'none'}} key={x[\"id\"]}><QueueUser\r\n                                    alreadyInQueue={this.state.alreadyInQueue}\r\n                                    isCanManage={this.state.isHaveAdditionalPermission || this.state.isTeacher}\r\n                                    username={x[\"username\"]}\r\n                                    fullname={x[\"first_name\"] + \" \" + (x[\"last_name\"] === null ? \"\" : x[\"last_name\"])}\r\n                                    queuename={this.props.queueName}\r\n                                    onChange={() => this.fetchQueue(this.props)}\r\n                                    imgUrl={x[\"contact_details\"][\"img\"] === null ? \"https://i.pinimg.com/564x/10/48/bb/1048bb24cfd89080238940e977c2936d.jpg\" : x[\"contact_details\"][\"img\"]}/>\r\n                                </li>\r\n\r\n                            })}\r\n\r\n                                <li style={{listStyle: 'none'}} ><QueueUser\r\n                                    alreadyInQueue={true}\r\n                                    isCanManage={true}\r\n                                    username={\"123\"}\r\n                                    fullname={\"Fullname\"}\r\n                                    queuename={this.props.queueName}\r\n                                    onChange={() => this.fetchQueue(this.props)}\r\n                                    imgUrl={ \"https://i.pinimg.com/564x/10/48/bb/1048bb24cfd89080238940e977c2936d.jpg\"}/>\r\n\r\n                                </li>\r\n                                <li style={{listStyle: 'none'}}><QueueUser\r\n                                    alreadyInQueue={true}\r\n                                    isCanManage={true}\r\n                                    username={\"123\"}\r\n                                    fullname={\"Fullname\"}\r\n                                    queuename={this.props.queueName}\r\n                                    onChange={() => this.fetchQueue(this.props)}\r\n                                    imgUrl={\"https://i.pinimg.com/564x/10/48/bb/1048bb24cfd89080238940e977c2936d.jpg\"}/>\r\n                                </li>\r\n\r\n\r\n                            </Sortable>\r\n                        </ul>\r\n                    }\r\n\r\n\r\n                    {\r\n                        this.state.requestingData ? \"\" : (this.state.users.length === 0 ?\r\n                            <div>В очереди пока никого нет</div> : \"\")\r\n                    }\r\n\r\n                </div>\r\n\r\n                <AllMedia show={this.state.showAllNotifications}\r\n                          onHide={() => this.setState({showAllNotifications: false})}\r\n                          data={this.state.allNotice}\r\n                          onClearNotifications={this.onClearNotifications}\r\n                />\r\n\r\n                <QueueSettingsModal\r\n                    queueName={this.props.queueName}\r\n                    show={this.state.showSettingsModal}\r\n                    onHide={() => this.setState({showSettingsModal: false})}\r\n                    title={this.state.queueName}/>\r\n\r\n\r\n                <ModalWindow show={this.state.showModal}\r\n                             onHide={() => this.setState({showModal: false})}\r\n                             fullName={this.state.queueName} shortName={this.props.queueName}\r\n                             onSuccess={() => {\r\n                                 this.setState({showModal: false});\r\n                                 window.location.reload();\r\n                             }}/>\r\n\r\n                <TeacherPanelModal\r\n                    show={this.state.showTeacherPanel}\r\n                    onHide={this.onTeacherModelHide}\r\n                    teacher={this.props.user}\r\n                    currentUsers={this.state.currentUser}\r\n                    nextUser={this.state.nextUser}\r\n                    onGetUser={this.fetchCurrentAndNextUser}\r\n                    onNextUser={this.userPassed}\r\n                />\r\n            </main>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal.js';\r\nimport Button from 'react-bootstrap/Button.js';\r\nimport ConfirmModal from './../util/ConfirmModal.jsx';\r\n\r\nexport default class QueueSettingsModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showDeleteConfirm: false, deleteConfirmSendingRequest: false,\r\n            deleteConfirmMessage: \"Вы уверены, что хотите удалить очередь?\",\r\n            showShuffleModal: false, shuffleModalSendingRequest: false,\r\n            shuffleModalMessage: \"Вы уверены, что хотите перемешать очередь?\"\r\n        };\r\n        this.onDeleteAccept = this.onDeleteAccept.bind(this);\r\n        this.onShuffleClick = this.onShuffleClick.bind(this);\r\n    }\r\n\r\n    onShuffleClick() {\r\n        this.setState({shuffleModalSendingRequest: true});\r\n\r\n        fetch(\"api/queue/\" + this.props.queueName + \"?action=shuffle\", {method: \"put\"})\r\n            .then(resp => {\r\n                if (resp.status === 200) {\r\n                    this.setState({showShuffleModal: false, shuffleModalSendingRequest: false});\r\n                    window.location.reload();\r\n                } else if (resp.status === 403) {\r\n                    this.setState({shuffleModalMessage: \"У вас недостаточно прав\", shuffleModalSendingRequest: false});\r\n                    this.onShuffleClick = () => {\r\n                        this.setState({showShuffleModal: false})\r\n                    };    // TODO: maybe do this better ? :)\r\n                } else {\r\n                    console.log(\"fail: \" + resp.status);\r\n                    this.setState({\r\n                        shuffleModalSendingRequest: false,\r\n                        shuffleModalMessage: \"Произошла ошибка. Повторите попытку позже\"\r\n                    });\r\n                }\r\n            }).catch(err => {\r\n            console.log(err);\r\n            this.setState({\r\n                shuffleModalSendingRequest: false,\r\n                shuffleModalMessage: \"Произошла ошибка. Повторите попытку позже\"\r\n            });\r\n        });\r\n    }\r\n\r\n    onDeleteAccept() {\r\n        this.setState({deleteConfirmSendingRequest: true});\r\n        fetch(\"api/queue?target=QUEUE&queue_name=\" + this.props.queueName, {method: \"delete\"})\r\n            .then(resp => {\r\n                if (resp.status === 200) {\r\n                    this.setState({showDeleteConfirm: false, deleteConfirmSendingRequest: false});\r\n                    window.location.reload();\r\n                    document.location.href = \"/helios.html#/search\"\r\n                } else {\r\n                    console.log(\"fail: \" + resp.status);\r\n                    this.setState({showDeleteConfirm: false, deleteConfirmSendingRequest: false});\r\n                }\r\n            }).catch(err => {\r\n            console.log(err);\r\n            this.setState({\r\n                deleteConfirmSendingRequest: false,\r\n                deleteConfirmMessage: \"Произошла ошибка. Повторите попытку позже\"\r\n            });\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal {...this.props} size=\"lg\" aria-labelledby=\"queue-all-notice-modal-vcenter\" centered>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title id=\"queue-all-notice-modal-vcenter\">\r\n                        Панель управления\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <ul className=\"col justify-content-center\">\r\n                        <li className={\"text-center my-3\"} style={{listStyle: 'none'}}>\r\n                            <button className=\"btn btn-outline-primary col-8\"\r\n                                    onClick={() => this.setState({showShuffleModal: true})}>Перемешать\r\n                            </button>\r\n                        </li>\r\n                        <li className={\"text-center my-3\"} style={{listStyle: 'none'}}>\r\n                            <button className=\"btn btn-outline-danger col-8\"\r\n                                    onClick={() => this.setState({showDeleteConfirm: true})}>Удалить очередь\r\n                            </button>\r\n                        </li>\r\n                    </ul>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button onClick={this.props.onHide} className={\"btn-primary\"}>Закрыть</Button>\r\n                </Modal.Footer>\r\n\r\n                <ConfirmModal\r\n                    sendingrequest={this.state.deleteConfirmSendingRequest ? 1 : 0}\r\n                    show={this.state.showDeleteConfirm}\r\n                    onHide={() => this.setState({showDeleteConfirm: false})}\r\n                    message={this.state.deleteConfirmMessage}\r\n                    accept={() => this.onDeleteAccept()} decline={() => this.setState({showDeleteConfirm: false})}/>\r\n\r\n                <ConfirmModal\r\n                    sendingrequest={this.state.shuffleModalSendingRequest ? 1 : 0}\r\n                    show={this.state.showShuffleModal}\r\n                    onHide={() => this.setState({showShuffleModal: false})}\r\n                    message={this.state.shuffleModalMessage}\r\n                    accept={this.onShuffleClick} decline={() => this.setState({showShuffleModal: false})}\r\n                />\r\n            </Modal>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport ConfirmModal from '../util/ConfirmModal.jsx';\r\n\r\nexport default class QueueUser extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            swapSendingRequest: false,\r\n            showSwapConfirm: false,\r\n            showNotificationModal: false,\r\n            notificationModalShowMessage: \"\"\r\n        };\r\n\r\n        this.onSwapAccept = this.onSwapAccept.bind(this);\r\n        this.deleteUserFromQueue = this.deleteUserFromQueue.bind(this);\r\n    }\r\n\r\n    onSwapAccept() {\r\n        this.setState({swapSendingRequest: true});\r\n        fetch(`api/swap?queue_name=${this.props.queuename}&target=${this.props.username}`, {method: 'post'})\r\n            .then(response => {\r\n                    if (response.status === 200) {\r\n                        this.setState({showSwapConfirm: false});\r\n                        window.location.reload();\r\n                        return;\r\n                    } else if (response.status === 202) {\r\n                        this.setState({\r\n                            showSwapConfirm: false,\r\n                            showNotificationModal: true,\r\n                            notificationModalShowMessage: \"Ваша заявка отправлена!\"\r\n                        });\r\n\r\n                    } else if (response.status === 400) {\r\n                        return response.json(); // handling continue\r\n                    } else {\r\n                        // TODO: WRITE SOMETHING ELSE ERROR STATUS CATCHING\r\n                        alert('Произошла ошибка. Fetch status : ' + response.status)\r\n                    }\r\n                    this.setState({swapSendingRequest: false});\r\n                }\r\n            )\r\n            .then(resp => {\r\n                if (resp === undefined) return;\r\n\r\n                if (resp[\"error\"] === \"self_request\") {\r\n                    this.setState({\r\n                        showSwapConfirm: false,\r\n                        showNotificationModal: true,\r\n                        notificationModalShowMessage: \"Вы не можете отправлять заявку себе!\"\r\n                    });\r\n                } else {\r\n                    this.setState({showSwapConfirm: false});\r\n                }\r\n            })\r\n            .catch(e => alert(e));\r\n    };\r\n\r\n    deleteUserFromQueue(){\r\n        fetch(`/api/queue?queue_name=${this.props.queuename}&target=USER&username=${this.props.username}`,\r\n            {\r\n                method: 'delete'\r\n            }\r\n        )\r\n            .then(resp => {\r\n            if (resp.status === 200) {\r\n                this.props.onChange();\r\n                return false;\r\n            }\r\n            else return resp.json()\r\n        })\r\n            .then(resp => {\r\n                alert(resp['error'] + \": \" + resp['error_description']);\r\n            })\r\n            .catch(e => console.log(e));\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"media text-muted pt-3\">\r\n                <div className={\"sortable-user-handler mr-1 my-auto\"}><i className={\"fa fa-th\"}></i></div>\r\n                <span className={\"mr-2\"}><img src={this.props.imgUrl}\r\n                                              className=\"dropdown-item img-fluid img-thumbnail rounded-circle p-0\"\r\n                                              style={{width: \"40px\"}} alt=\"...\" width={\"40px\"} height={\"40px\"}/></span>\r\n                <div className=\"media-body pb-3 mb-0 small lh-125 border-bottom border-gray\">\r\n                    <div className=\"d-flex justify-content-between align-items-center w-100\">\r\n                        <strong className=\"text-gray-dark\">{this.props.fullname}</strong>\r\n                        <div className=\"dropdown show dropleft\">\r\n                    <span role=\"button\" id=\"dropdownMenuLink\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n                          aria-expanded=\"false\">\r\n                    <i className=\"fa fa-bars\" aria-hidden=\"true\"></i>\r\n                    </span>\r\n\r\n                            <div className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuLink\">\r\n                                <div className=\"dropdown-item\"><img src={this.props.imgUrl}\r\n                                                                    className=\"dropdown-item img-fluid img-thumbnail rounded-circle\"\r\n                                                                    alt=\"...\" width={\"50px\"} height={\"50px\"}/></div>\r\n\r\n                                {this.props.alreadyInQueue && <button className=\"dropdown-item\" onClick={() => this.setState({showSwapConfirm: true})}>Поменяться</button>}\r\n                                {this.props.isCanManage && <button className=\"dropdown-item text-danger\" onClick={this.deleteUserFromQueue}>\r\n                                    <i className={\"fa fa-times mt-1\"}></i> <span >Удалить</span>\r\n                                </button>}\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <span className=\"d-block\">{this.props.username}</span>\r\n                </div>\r\n\r\n                <ConfirmModal\r\n                    sendingrequest={this.state.swapSendingRequest ? 1 : 0}\r\n                    show={this.state.showSwapConfirm}\r\n                    onHide={() => this.setState({showSwapConfirm: false})}\r\n                    message={`Вы хотите поменяться местами с пользователем ${this.props.fullname} @ ${this.props.username}`}\r\n                    accept={() => this.onSwapAccept()} decline={() => this.setState({showSwapConfirm: false})}/>\r\n\r\n                <ConfirmModal\r\n                    message={this.state.notificationModalShowMessage}\r\n                    show={this.state.showNotificationModal}\r\n                    accept={() => this.setState({showNotificationModal: false})}\r\n                    decline={() => this.setState({showNotificationModal: false})}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal.js';\r\nimport Button from 'react-bootstrap/Button.js';\r\nimport Form from 'react-bootstrap/Form.js';\r\nimport Spinner from './../util/RoundedSpinner.jsx';\r\nimport Card from 'react-bootstrap/Card.js';\r\nimport Comment from './QueueNotification.jsx';\r\nimport TimeUtil from './../util/TimeUtil.js';\r\n\r\n\r\nexport default class TeacherPanelModal extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            commentInputFocused : false,\r\n            isCommentaryPrivate: false,\r\n            commentaryInput: \"\",\r\n            textUnderInput: \"Комментарий может быть публичным или приватным\",\r\n            comments : []\r\n        };\r\n\r\n        this.addCommentary = this.addCommentary.bind(this);\r\n        this.commentaryInputHandler = this.commentaryInputHandler.bind(this);\r\n        this.fetchComments = this.fetchComments.bind(this);\r\n    }\r\n\r\n    componentWillReceiveProps(newProps){\r\n        this.fetchComments(newProps);\r\n    }\r\n\r\n    fetchComments(props){\r\n\r\n        if (props.currentUsers !== null && props.currentUsers.length > 0)\r\n        fetch(`/api/commentaries?username=${props.currentUsers[0]['username']}`)\r\n            .then(resp => {\r\n                if (resp.status === 200){\r\n                    return resp.json();\r\n                } else {\r\n                    alert(resp.status)\r\n                }\r\n            })\r\n            .then(comments => this.setState({comments: comments.reverse()}))\r\n    }\r\n\r\n    addCommentary(){\r\n        console.log(\"message: \" + this.state.commentaryInput + \" \" + this.state.isCommentaryPrivate);\r\n        fetch(`/api/commentaries?username=${this.props.currentUsers[0]['username']}&text=${this.state.commentaryInput}&type=${this.state.isCommentaryPrivate?\"private\":\"public\"}`, {method: 'put'})\r\n            .then(resp => {\r\n                    if (resp.status === 200){\r\n                        this.setState({\r\n                            commentInputFocused : false,\r\n                            isCommentaryPrivate: false,\r\n                            commentaryInput: \"\",\r\n                            textUnderInput: \"Комментарий может быть публичным или приватным\"\r\n                        });\r\n\r\n                        this.fetchComments(this.props);\r\n\r\n                    } else {\r\n                        return resp.json();\r\n                    }\r\n            })\r\n            .then(resp => {\r\n                this.setState({textUnderInput: resp['error_description']})\r\n            })\r\n            .catch(e => console.log(e))\r\n    }\r\n\r\n\r\n    commentaryInputHandler(event){\r\n        this.setState({commentaryInput: event.target.value})\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n\r\n                <Modal {...this.props} size=\"lg\" aria-labelledby=\"queue-all-notice-modal-vcenter\" centered>\r\n                    {this.props.teacher !== null ? <div>\r\n\r\n                            <Modal.Header >\r\n                                <Modal.Title id=\"queue-all-notice-modal-vcenter\">\r\n                                    Панель преподавателя\r\n                                </Modal.Title>\r\n                            </Modal.Header>\r\n                            <Modal.Body>\r\n                                <h4><span\r\n                                    className={\"text-secondary\"}>Принимающий:</span> {this.props.teacher['user']['last_name']}\r\n                                </h4>\r\n\r\n                                <hr/>\r\n                                {this.props.currentUsers === null ? <div>Не осталось свободных студентов</div> :\r\n                                    <Card border=\"success\" className=\"text-center\">\r\n                                        <Card.Header className={\"text-white bg-success font-weight-bold\"}>\r\n                                            Сейчас на очереди\r\n                                        </Card.Header>\r\n                                        <Card.Body>\r\n                                            <Card.Title>{this.props.currentUsers[0]['fullname']}</Card.Title>\r\n                                            <Card.Text className={\"font-weight-bold\"}>\r\n                                                Здесь должен быть номер лабораторной работы\r\n                                            </Card.Text>\r\n                                            <div className={\"d-flex flex-row\"}>\r\n                                                <Button variant=\"secondary\" className={\"mx-1 ml-auto\"}\r\n                                                        onClick={this.props.onNextUser}>Пропустить</Button>\r\n                                                <Button variant=\"success\" className={\"mx-1 mr-auto\"}\r\n                                                        onClick={this.props.onNextUser}>Принято</Button>\r\n                                            </div>\r\n                                            <div className={\"d-flex flex-row mt-3\"}>\r\n                                                <Form className={\"mx-auto\" + \" \" + (this.state.commentInputFocused?\"w-100\":\"w-sm-100 w-md-50\")}\r\n\r\n                                                      onFocus={() => this.setState({commentInputFocused: true})}\r\n                                                >\r\n\r\n\r\n                                                    <Form.Group controlId=\"formBasicInput\">\r\n                                                        <Form.Control\r\n                                                            type=\"text\"\r\n                                                            placeholder=\"Комментарий\"\r\n                                                            as=\"textarea\"\r\n                                                            onInput={this.commentaryInputHandler}\r\n                                                            value={this.state.commentaryInput}\r\n                                                            style={{height: '40px'}}\r\n                                                        />\r\n                                                        <Form.Text className=\"text-muted\">\r\n                                                            {this.state.textUnderInput}\r\n                                                        </Form.Text>\r\n                                                    </Form.Group>\r\n\r\n                                                    { this.state.commentInputFocused && <Form.Group controlId=\"formBasicCheckbox\" className={\"d-flex flex-row float-right\"}>\r\n                                                        <Form.Check\r\n                                                            type=\"checkbox\"\r\n                                                            label=\"Приватный\"\r\n                                                            onChange = {(evt)=> this.setState({isCommentaryPrivate: evt.target.checked})}\r\n                                                        />\r\n                                                        <Button\r\n                                                            variant={\"primary\"}\r\n                                                            className={\"mx-2\"}\r\n                                                            size={\"sm\"}\r\n                                                            onClick={this.addCommentary}\r\n                                                        >\r\n                                                            Добавить\r\n                                                        </Button>\r\n                                                    </Form.Group>}\r\n\r\n                                                </Form>\r\n\r\n\r\n                                            </div>\r\n\r\n                                            <ul>\r\n                                                {this.state.comments.map((x, i) => <li key={i} style={{listStyle: 'none'}}>\r\n                                                    <Comment\r\n                                                        author={x['author']['first_name'] + \" \" + x['author']['last_name']}\r\n                                                        message={x['text']}\r\n                                                        time={TimeUtil.getFormattedTime(x['creation_date'])}\r\n                                                    />\r\n                                                </li>)}\r\n                                            </ul>\r\n\r\n                                        </Card.Body>\r\n                                        <Card.Footer className=\"text-muted\">2 days ago</Card.Footer>\r\n                                    </Card>}\r\n\r\n                                {this.props.nextUser !== null && <Card className=\"text-center mx-auto mt-3 w-75\">\r\n                                    <Card.Header>Следующий</Card.Header>\r\n                                    <Card.Body>\r\n                                        <Card.Title>{this.props.nextUser['fullname']}</Card.Title>\r\n                                        <Card.Text className={\"font-weight-bold\"}>\r\n                                            Номер лабораторной работы\r\n                                        </Card.Text>\r\n\r\n                                    </Card.Body>\r\n                                    <Card.Footer className=\"text-muted\">16 days ago</Card.Footer>\r\n                                </Card>}\r\n                            </Modal.Body>\r\n                            <Modal.Footer>\r\n                                <Button onClick={this.props.onHide} className={\"btn-primary\"}>Закрыть</Button>\r\n                            </Modal.Footer>\r\n                        </div>\r\n                        :\r\n\r\n                        <Spinner/>\r\n                    }\r\n                    </Modal>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal.js';\r\nimport RoundedSpinner from './../util/RoundedSpinner.jsx';\r\n\r\nexport default class ConfirmModal extends React.Component {\r\n    render() {\r\n        return (\r\n            <Modal {...this.props} size=\"md\" aria-labelledby=\"queue-all-notice-modal-vcenter\" centered>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title id=\"queue-all-notice-modal-vcenter\">\r\n                        {this.props.title}\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    {this.props.sendingrequest ?\r\n                        <div className={\"mx-auto text-center text-primary\"}><RoundedSpinner/></div> :\r\n                        <ul className=\"col justify-content-center\">\r\n                            <li className={\"text-center my-4\"} style={{listStyle: 'none'}}><p\r\n                                className={\"\"}>{this.props.message}</p></li>\r\n                            <li className={\"text-center my-4\"} style={{listStyle: 'none'}}>\r\n                                <button className=\"btn btn-primary col-4 mx-1\" onClick={this.props.accept}>Да</button>\r\n                                <button className=\"btn btn-secondary col-4 mx-1\" onClick={this.props.decline}>Отмена\r\n                                </button>\r\n                            </li>\r\n                        </ul>}\r\n                </Modal.Body>\r\n            </Modal>\r\n        )\r\n    }\r\n}\r\n\r\n","import React from \"react\";\r\n\r\nexport default class GrowingSpinner extends React.Component {\r\n    render() {\r\n        return (\r\n            <div className=\"d-flex justify-content-center\">\r\n                <div className=\"spinner-grow spinner-grow-lg text-muted\" style={{\"width\": \"3rem\", \"height\": \"3rem\"}}\r\n                     role=\"status\">\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                </div>\r\n\r\n            </div>)\r\n\r\n    }\r\n}\r\n\r\n","import React from 'react';\r\n\r\nimport Modal from 'react-bootstrap/Modal.js';\r\nimport Button from 'react-bootstrap/Button.js';\r\n\r\nimport RoundedSpinner from './../util/RoundedSpinner.jsx';\r\n\r\nexport default class QueuePasswordModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {password: \"\", successful: true, sendingReq: false};\r\n        this.onPasswordChange = this.onPasswordChange.bind(this);\r\n        this.onJoinButtonClick = this.onJoinButtonClick.bind(this);\r\n    }\r\n\r\n    onJoinButtonClick() {\r\n        this.setState({sendingReq: true});\r\n        fetch(\"api/queue?queue_name=\" + this.props.shortName + \"&password=\" + this.state.password, {method: \"put\"})\r\n            .then(resp => {\r\n                if (resp.status === 200) {\r\n                    this.setState({successful: true});\r\n                    if (this.props.onSuccess !== undefined || this.props.onSuccess !==null){\r\n                        this.props.onSuccess();\r\n                    }\r\n                } else if (resp.status === 403) {\r\n                    this.setState({successful: false})\r\n                }\r\n\r\n                this.setState({sendingReq: false});\r\n            })\r\n            .catch(this.setState({sendingReq: false}))\r\n\r\n\r\n    }\r\n\r\n    onPasswordChange(e) {\r\n        this.setState({password: e.target.value});\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal {...this.props} size=\"md\" aria-labelledby=\"password-modal-vcenter\" centered>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title id=\"password-modal-vcenter\">\r\n                        {this.props.fullName}\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    {this.state.sendingReq ? <RoundedSpinner className={\"mx-auto\"}/> :\r\n                        <div>\r\n                            Введите пароль для входа в приватную очередь:<br/>\r\n                            {this.state.successful ? \"\" : <p className={\"text-danger\"}>Неверный пароль</p>}\r\n                            <form action=\"\" className={\"mx-auto justify-content-center text-center\"}>\r\n                                <input\r\n                                    className={\"mt-2 text-center rounded \" + (this.state.successful ? \"\" : \"border-danger\")}\r\n                                    type=\"password\" id={\"password-modal-input\"} onChange={this.onPasswordChange}/>\r\n                            </form>\r\n                        </div>}\r\n\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button onClick={this.onJoinButtonClick}>Подтвердить</Button>\r\n                    <Button onClick={this.props.onHide} className={\"btn-secondary\"}>Закрыть</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        )\r\n    }\r\n}\r\n","export default class TimeUtil {\r\n    static getFormattedTime(dateISO) {\r\n        let a = dateISO.split(/[^0-9]/);\r\n        let creationDate = new Date(Date.UTC(a[0], a[1] - 1, a[2], a[3], a[4], a[5]));\r\n\r\n        const DATE = creationDate.getDate();\r\n        const MONTH = creationDate.toLocaleString('default', {month: 'short'});\r\n        const HOURS = creationDate.getHours();\r\n        const MINUTES = creationDate.getMinutes();\r\n        const SECONDS = creationDate.getSeconds();\r\n        return `${HOURS}:${MINUTES}:${SECONDS} ${DATE} ${MONTH}`;\r\n    }\r\n}\r\n"],"sourceRoot":""}